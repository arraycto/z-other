webpackJsonp([1],{"0aAL":function(e,t,s){"use strict";var r=s("AA3o"),a=s.n(r);t.a=function e(t){var s=t.id,r=t.name;a()(this,e),this.id=s,this.name=r,this.avatar="https://y.gtimg.cn/music/photo_new/T001R300x300M000"+s+".jpg?max_age=2592000"}},McrO:function(e,t){},"OWp/":function(e,t){},PTRk:function(e,t){},"Skm/":function(e,t,s){"use strict";function r(e,t,s,r){var a=y()({},{g_tk:5381,uin:0,format:"jsonp",inCharset:"utf-8",outCharset:"utf-8",notice:0,platform:"h5",needNewCode:1,zhidaqu:1,t:0,flag:1,ie:"utf-8",sem:1,aggr:0,remoteplace:"txt.mqq.all"},{w:e,p:t,perpage:r,n:r,catZhida:s?1:0});return Object(_.a)("https://c.y.qq.com/soso/fcgi-bin/search_for_qq_cp",a,C.b)}Object.defineProperty(t,"__esModule",{value:!0});var a=s("4YfN"),i=s.n(a),n=s("d4zx"),c={props:{placeholder:{type:String,default:"搜索歌曲、歌手"}},data:function(){return{query:""}},methods:{clear:function(){this.query=""},setQuery:function(e){this.query=e},blur:function(){this.$refs.inputBox.blur()}},created:function(){var e=this;this.$watch("query",Object(n.a)(function(t){e.$emit("query",t)},200))}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search-box"},[s("i",{staticClass:"icon-search"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"inputBox",staticClass:"box",attrs:{placeholder:e.placeholder},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.query,expression:"query"}],staticClass:"icon-delete",on:{click:function(t){e.clear()}}})])},staticRenderFns:[]},l=s("OF7X")(c,o,!1,function(e){s("r/5M")},"data-v-52cddd6a",null).exports,u=s("1PCG"),h={props:{searches:{type:Array,default:[]}},methods:{selectItem:function(e){this.$emit("select",e)},deleteOne:function(e){this.$emit("delete",e)}}},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.searches.length,expression:"searches.length"}],staticClass:"search-list"},[s("transition-group",{attrs:{name:"list",tag:"ul"}},e._l(e.searches,function(t){return s("li",{key:t,staticClass:"search-item",on:{click:function(s){e.selectItem(t)}}},[s("span",{staticClass:"text"},[e._v(e._s(t))]),e._v(" "),s("span",{staticClass:"icon",on:{click:function(s){s.stopPropagation(),e.deleteOne(t)}}},[s("i",{staticClass:"icon-delete"})])])}))],1)},staticRenderFns:[]},d=s("OF7X")(h,f,!1,function(e){s("PTRk")},"data-v-4dc860fa",null).exports,p=s("7X9E"),v=s("ezFt"),m=s("VZz8"),g=s("aA9S"),y=s.n(g),_=s("lzic"),C=s("T452"),w=s("PvFA"),q=s("0aAL"),S=s("9rMa"),x=s("HzVJ"),b="singer",k={props:{showSinger:{type:Boolean,default:!0},query:{type:String,default:""}},data:function(){return{page:1,result:[],pullup:!0,hasMore:!0,beforeScroll:!0}},methods:i()({searchQuery:function(){var e=this;this.hasMore=!0,this.page=1,this.$refs.suggest.scrollTo(0,0),r(this.query,this.page,this.showSinger,20).then(function(t){t.code===C.a&&(e.result=e._genResult(t.data),e._checkMore(t.data))})},searchMore:function(){var e=this;this.hasMore&&(this.page++,r(this.query,this.page,this.showSinger,20).then(function(t){t.code===C.a&&(e.result=e.result.concat(e._genResult(t.data)),e._checkMore(t.data))}))},_genResult:function(e){var t=[];return e.zhida&&e.zhida.singerid&&t.push(i()({},e.zhida,{type:b})),e.song&&(t=t.concat(this._normalizeSongs(e.song.list))),t},_normalizeSongs:function(e){var t=[];return e.forEach(function(e){e.songid&&e.albumid&&t.push(Object(w.a)(e))}),t},_checkMore:function(e){var t=e.song;(!t.list.length||t.curnum+20*t.curpage>t.totalnum)&&(this.hasMore=!1)},getIconCls:function(e){return e.type===b?"icon-mine":"icon-music1"},getDisplayName:function(e){return e.type===b?e.singername:e.name+"-"+e.singer},selectItem:function(e){if(e.type===b){var t=new q.a({id:e.singermid,name:e.singername});this.$router.push({path:"/search/"+t.id}),this.setSinger(t)}else this.insertSong(e);this.$emit("select",e)},refresh:function(){this.$refs.suggest.refresh()},listScroll:function(){this.$emit("listScroll")}},Object(S.d)({setSinger:x.k}),Object(S.b)(["insertSong"])),watch:{query:function(){this.searchQuery()}},components:{Scroll:u.a,Loading:v.a,NoResult:m.a}},M={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("scroll",{ref:"suggest",staticClass:"suggest",attrs:{data:e.result,pullup:e.pullup,beforeScroll:e.beforeScroll},on:{scrollToEnd:e.searchMore,beforeScroll:e.listScroll}},[s("ul",{staticClass:"suggest-list"},[e._l(e.result,function(t){return s("li",{staticClass:"suggest-item",on:{click:function(s){e.selectItem(t)}}},[s("div",{staticClass:"icon"},[s("i",{class:e.getIconCls(t)})]),e._v(" "),s("div",{staticClass:"name"},[s("p",{staticClass:"text",domProps:{innerHTML:e._s(e.getDisplayName(t))}})])])}),e._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:e.hasMore,expression:"hasMore"}],attrs:{title:""}})],2),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.hasMore&&!e.result.length,expression:"!hasMore && !result.length"}],staticClass:"no-result-wrapper"},[s("no-result",{attrs:{title:"暂无搜索结果!"}})],1)])},staticRenderFns:[]},O=s("OF7X")(k,M,!1,function(e){s("OWp/")},"data-v-395082fc",null).exports,$={data:function(){return{hotKey:[],query:"",refreshDelay:100}},created:function(){this._getHotKey()},computed:i()({shortcut:function(){return this.hotKey}},Object(S.c)(["searchHistory"])),methods:i()({_getHotKey:function(){var e=this;Object(_.a)("https://c.y.qq.com/splcloud/fcgi-bin/gethotkey.fcg",{g_tk:5381,uin:0,format:"json",inCharset:"utf-8",outCharset:"utf-8",notice:0,platform:"h5",needNewCode:1},C.b).then(function(t){t.code===C.a&&(e.hotKey=t.data.hotkey.slice(1,11))})},onQueryChange:function(e){this.query=e},showConfirm:function(){this.$refs.confirm.show()},blurInput:function(){this.$refs.searchBox.blur()},saveSearch:function(){this.saveSearchHistory(this.query)},addQuery:function(e){this.$refs.searchBox.setQuery(e)}},Object(S.b)(["saveSearchHistory","deleteSearchHistory","clearSearchHistory"])),watch:{query:function(e){var t=this;e||setTimeout(function(){t.$refs.shortcut.refresh()},20)}},components:{SearchBox:l,Scroll:u.a,SearchList:d,Confirm:p.a,SearchResult:O}},R={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search"},[s("div",{staticClass:"search-box-wrapper"},[s("search-box",{ref:"searchBox",on:{query:e.onQueryChange}})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.query,expression:"!query"}],ref:"shortcutWrapper",staticClass:"shortcut-wrapper"},[s("scroll",{ref:"shortcut",staticClass:"shortcut",attrs:{refreshDelay:e.refreshDelay,data:e.shortcut}},[s("div",[s("div",{staticClass:"hot-key"},[s("h1",{staticClass:"title"},[e._v("热门搜索")]),e._v(" "),s("ul",e._l(e.hotKey,function(t){return s("li",{staticClass:"item",on:{click:function(s){e.addQuery(t.k)}}},[s("span",[e._v(e._s(t.k))])])}))]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.searchHistory.length,expression:"searchHistory.length"}],staticClass:"search-history"},[s("h1",{staticClass:"title"},[s("span",{staticClass:"text"},[e._v("搜索历史")]),e._v(" "),s("span",{staticClass:"clear",on:{click:e.showConfirm}},[s("i",{staticClass:"icon-clear"})])]),e._v(" "),s("search-list",{attrs:{searches:e.searchHistory},on:{select:e.addQuery,delete:e.deleteSearchHistory}})],1)])])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.query,expression:"query"}],ref:"searchResult",staticClass:"search-result"},[s("search-result",{ref:"suggest",attrs:{query:e.query},on:{listScroll:e.blurInput,select:e.saveSearch}})],1),e._v(" "),s("confirm",{ref:"confirm",attrs:{text:"是否清空搜索历史"},on:{confirm:e.clearSearchHistory}}),e._v(" "),s("router-view")],1)},staticRenderFns:[]},H=s("OF7X")($,R,!1,function(e){s("cRdq")},null,null);t.default=H.exports},VZz8:function(e,t,s){"use strict";var r={props:{title:{type:String,default:""}}},a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"no-result"},[t("div",{staticClass:"no-result-icon"}),this._v(" "),t("p",{staticClass:"no-result-text"},[this._v(this._s(this.title))])])},staticRenderFns:[]},i=s("OF7X")(r,a,!1,function(e){s("McrO")},"data-v-3658312a",null);t.a=i.exports},cRdq:function(e,t){},"r/5M":function(e,t){}});