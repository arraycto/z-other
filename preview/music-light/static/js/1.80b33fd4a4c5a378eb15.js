webpackJsonp([1],{"0OUa":function(e,t){},"0aAL":function(e,t,s){"use strict";var r=s("Zrlr"),a=s.n(r);t.a=function e(t){var s=t.id,r=t.name;a()(this,e),this.id=s,this.name=r,this.avatar="https://y.gtimg.cn/music/photo_new/T001R300x300M000"+s+".jpg?max_age=2592000"}},"1vE3":function(e,t){},FVFM:function(e,t){},"Skm/":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("Dd8w"),a=s.n(r),i=s("d4zx"),n={props:{placeholder:{type:String,default:"搜索歌曲、歌手"}},data:function(){return{query:""}},methods:{clear:function(){this.query=""},setQuery:function(e){this.query=e},blur:function(){this.$refs.inputBox.blur()}},created:function(){var e=this;this.$watch("query",Object(i.a)(function(t){e.$emit("query",t)},200))}},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search-box"},[s("i",{staticClass:"icon-search"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"inputBox",staticClass:"box",attrs:{placeholder:e.placeholder},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.query,expression:"query"}],staticClass:"icon-delete",on:{click:function(t){e.clear()}}})])},staticRenderFns:[]};var o=s("VU/8")(n,c,!1,function(e){s("zgry")},"data-v-5f5ccd0b",null).exports,l=s("1PCG"),u={props:{searches:{type:Array,default:[]}},methods:{selectItem:function(e){this.$emit("select",e)},deleteOne:function(e){this.$emit("delete",e)}}},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.searches.length,expression:"searches.length"}],staticClass:"search-list"},[s("transition-group",{attrs:{name:"list",tag:"ul"}},e._l(e.searches,function(t){return s("li",{key:t,staticClass:"search-item",on:{click:function(s){e.selectItem(t)}}},[s("span",{staticClass:"text"},[e._v(e._s(t))]),e._v(" "),s("span",{staticClass:"icon",on:{click:function(s){s.stopPropagation(),e.deleteOne(t)}}},[s("i",{staticClass:"icon-delete"})])])}),0)],1)},staticRenderFns:[]};var f=s("VU/8")(u,h,!1,function(e){s("1vE3")},"data-v-14752700",null).exports,d=s("7X9E"),v=s("ezFt"),p=s("VZz8"),g=s("woOf"),m=s.n(g),y=s("lzic"),_=s("T452");function C(e,t,s,r){var a=m()({},{g_tk:5381,uin:0,format:"jsonp",inCharset:"utf-8",outCharset:"utf-8",notice:0,platform:"h5",needNewCode:1,zhidaqu:1,t:0,flag:1,ie:"utf-8",sem:1,aggr:0,remoteplace:"txt.mqq.all"},{w:e,p:t,perpage:r,n:r,catZhida:s?1:0});return Object(y.a)("https://c.y.qq.com/soso/fcgi-bin/search_for_qq_cp",a,_.b)}var w=s("PvFA"),q=s("0aAL"),S=s("NYxO"),x=s("HzVJ"),b={props:{showSinger:{type:Boolean,default:!0},query:{type:String,default:""}},data:function(){return{page:1,result:[],pullup:!0,hasMore:!0,beforeScroll:!0}},methods:a()({searchQuery:function(){var e=this;this.hasMore=!0,this.page=1,this.$refs.suggest.scrollTo(0,0),C(this.query,this.page,this.showSinger,20).then(function(t){t.code===_.a&&(e.result=e._genResult(t.data),e._checkMore(t.data))})},searchMore:function(){var e=this;this.hasMore&&(this.page++,C(this.query,this.page,this.showSinger,20).then(function(t){t.code===_.a&&(e.result=e.result.concat(e._genResult(t.data)),e._checkMore(t.data))}))},_genResult:function(e){var t=[];return e.zhida&&e.zhida.singerid&&t.push(a()({},e.zhida,{type:"singer"})),e.song&&(t=t.concat(this._normalizeSongs(e.song.list))),t},_normalizeSongs:function(e){var t=[];return e.forEach(function(e){e.songid&&e.albumid&&t.push(Object(w.a)(e))}),t},_checkMore:function(e){var t=e.song;(!t.list.length||t.curnum+20*t.curpage>t.totalnum)&&(this.hasMore=!1)},getIconCls:function(e){return"singer"===e.type?"icon-mine":"icon-music1"},getDisplayName:function(e){return"singer"===e.type?e.singername:e.name+"-"+e.singer},selectItem:function(e){if("singer"===e.type){var t=new q.a({id:e.singermid,name:e.singername});this.$router.push({path:"/search/"+t.id}),this.setSinger(t)}else this.insertSong(e);this.$emit("select",e)},refresh:function(){this.$refs.suggest.refresh()},listScroll:function(){this.$emit("listScroll")}},Object(S.d)({setSinger:x.k}),Object(S.b)(["insertSong"])),watch:{query:function(){this.searchQuery()}},components:{Scroll:l.a,Loading:v.a,NoResult:p.a}},k={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("scroll",{ref:"suggest",staticClass:"suggest",attrs:{data:e.result,pullup:e.pullup,beforeScroll:e.beforeScroll},on:{scrollToEnd:e.searchMore,beforeScroll:e.listScroll}},[s("ul",{staticClass:"suggest-list"},[e._l(e.result,function(t){return s("li",{staticClass:"suggest-item",on:{click:function(s){e.selectItem(t)}}},[s("div",{staticClass:"icon"},[s("i",{class:e.getIconCls(t)})]),e._v(" "),s("div",{staticClass:"name"},[s("p",{staticClass:"text",domProps:{innerHTML:e._s(e.getDisplayName(t))}})])])}),e._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:e.hasMore,expression:"hasMore"}],attrs:{title:""}})],2),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.hasMore&&!e.result.length,expression:"!hasMore && !result.length"}],staticClass:"no-result-wrapper"},[s("no-result",{attrs:{title:"暂无搜索结果!"}})],1)])},staticRenderFns:[]};var $=s("VU/8")(b,k,!1,function(e){s("jcw4")},"data-v-02464922",null).exports,M={data:function(){return{hotKey:[],query:"",refreshDelay:100}},created:function(){this._getHotKey()},computed:a()({shortcut:function(){return this.hotKey}},Object(S.c)(["searchHistory"])),methods:a()({_getHotKey:function(){var e=this;Object(y.a)("https://c.y.qq.com/splcloud/fcgi-bin/gethotkey.fcg",{g_tk:5381,uin:0,format:"json",inCharset:"utf-8",outCharset:"utf-8",notice:0,platform:"h5",needNewCode:1},_.b).then(function(t){t.code===_.a&&(e.hotKey=t.data.hotkey.slice(1,11))})},onQueryChange:function(e){this.query=e},showConfirm:function(){this.$refs.confirm.show()},blurInput:function(){this.$refs.searchBox.blur()},saveSearch:function(){this.saveSearchHistory(this.query)},addQuery:function(e){this.$refs.searchBox.setQuery(e)}},Object(S.b)(["saveSearchHistory","deleteSearchHistory","clearSearchHistory"])),watch:{query:function(e){var t=this;e||setTimeout(function(){t.$refs.shortcut.refresh()},20)}},components:{SearchBox:o,Scroll:l.a,SearchList:f,Confirm:d.a,SearchResult:$}},O={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search"},[s("div",{staticClass:"search-box-wrapper"},[s("search-box",{ref:"searchBox",on:{query:e.onQueryChange}})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.query,expression:"!query"}],ref:"shortcutWrapper",staticClass:"shortcut-wrapper"},[s("scroll",{ref:"shortcut",staticClass:"shortcut",attrs:{refreshDelay:e.refreshDelay,data:e.shortcut}},[s("div",[s("div",{staticClass:"hot-key"},[s("h1",{staticClass:"title"},[e._v("热门搜索")]),e._v(" "),s("ul",e._l(e.hotKey,function(t){return s("li",{staticClass:"item",on:{click:function(s){e.addQuery(t.k)}}},[s("span",[e._v(e._s(t.k))])])}),0)]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.searchHistory.length,expression:"searchHistory.length"}],staticClass:"search-history"},[s("h1",{staticClass:"title"},[s("span",{staticClass:"text"},[e._v("搜索历史")]),e._v(" "),s("span",{staticClass:"clear",on:{click:e.showConfirm}},[s("i",{staticClass:"icon-clear"})])]),e._v(" "),s("search-list",{attrs:{searches:e.searchHistory},on:{select:e.addQuery,delete:e.deleteSearchHistory}})],1)])])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.query,expression:"query"}],ref:"searchResult",staticClass:"search-result"},[s("search-result",{ref:"suggest",attrs:{query:e.query},on:{listScroll:e.blurInput,select:e.saveSearch}})],1),e._v(" "),s("confirm",{ref:"confirm",attrs:{text:"是否清空搜索历史"},on:{confirm:e.clearSearchHistory}}),e._v(" "),s("router-view")],1)},staticRenderFns:[]};var j=s("VU/8")(M,O,!1,function(e){s("0OUa")},null,null);t.default=j.exports},VZz8:function(e,t,s){"use strict";var r={props:{title:{type:String,default:""}}},a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"no-result"},[t("div",{staticClass:"no-result-icon"}),this._v(" "),t("p",{staticClass:"no-result-text"},[this._v(this._s(this.title))])])},staticRenderFns:[]};var i=s("VU/8")(r,a,!1,function(e){s("FVFM")},"data-v-3918041a",null);t.a=i.exports},jcw4:function(e,t){},zgry:function(e,t){}});